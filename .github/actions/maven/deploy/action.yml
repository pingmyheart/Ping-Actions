name: Maven Deploy Action

runs:
  using: composite

  steps:
    - name: Build and Deploy
      shell: bash
      run: |
        mvn clean package deploy
        echo "Maven deploy completed successfully."
      env:
        GITHUB_TOKEN: ${{ github.token }}

    - name: Publish Test Report
      uses: mikepenz/action-junit-report@v5
      if: success() || failure() # always run even if the previous step fails
      with:
        report_paths: '**/surefire-reports/TEST-*.xml'
        include_passed: true